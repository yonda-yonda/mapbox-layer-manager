/*! mapbox-layer-manager v0.0.1 | yonda-yonda | license: MIT */
var MapboxLayerManager=function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,n=(i=r(1))&&i.__esModule?i:{default:i},o=r(3);function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function l(e,t,r){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(r):n.value}})(e,t,r||e)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return function(){var t,r=v(e);if(_()){var i=v(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return y(this,t)}}function y(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function b(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var m=function(e,t){return("number"!=typeof t||t>e.length||t<0)&&(t=e.length),t},w=function(e,t,r){for(var i=0;i<e.length;i++)if(e[i][t]===r)return i;return-1},I=function e(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(void 0===i)r=0;else{var n=w(t,"_id",i);r=n+1}if(!(r>=t.length))for(var o=r;o<t.length;o++){var a=t[o];if(a instanceof O)return a._id;var s=e(a._lyrs);if(s)return s}},x=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;r=m(t,r),t.splice(r,0,e)},j=function(e,t){if(t.includes(e))return t.splice(t.indexOf(e),1)},E=function(e){var t=e.lastIndexOf("/");return t<0?"":e.slice(0,t)},O=function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};g(this,e),this._id=t,this._parent=r,this._type=i.type,this._visible=i.visible},P=function(){function e(t,r,i){g(this,e),this._map=t,this._lyrs=[],this._id=r,this._parent=i,this._underlayId="",this._overlayId=""}return b(e,[{key:"_show",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(r=(0,n.default)(!0,{force:!1,onVisiblePath:!0},r)).force,o=r.onVisiblePath,a=this._lyrs[w(this._lyrs,"_id",e)];a&&(!0!==t&&!0!==i||(a._visible=!0),a instanceof O?!0===o&&!0===a._visible&&this._map.setLayoutProperty(a._id,"visibility","visible"):a._lyrs.forEach((function(e){a._show(e._id,!1,r)})))}},{key:"_hide",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(r=(0,n.default)(!0,{force:!1},r)).force,o=this._lyrs[w(this._lyrs,"_id",e)];o&&(!0!==t&&!0!==i||(o._visible=!1),o instanceof O?this._map.getLayer(o._id)&&this._map.setLayoutProperty(o._id,"visibility","none"):o._lyrs.forEach((function(e){o._hide(e._id,!1,r)})))}},{key:"_addGroup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=(0,n.default)(!0,{type:"multi",visible:!0},e),t=(0,n.default)(!0,{fixedTo:"",beforeId:void 0},t);var r,i,o=e.id,a=e.type,s=e.visible,l=t.beforeId,u=t.fixedTo;if(w(this._lyrs,"_id",o)>=0)throw new Error("".concat(o," already exists on this manager."));if("overlay"===u)r=this._lyrs.length,this._overlayId=o;else if("underlay"===u)r=0,this._underlayId=o;else{if(l){var f=E(o),c=E(l);if(f!==c)throw new Error("beforeId is not same group.");var d=w(this._lyrs,"_id",l);if(""!==this._underlayId&&0===d)throw new Error("can't overwrite fixed layer.");r=d}else r=this._lyrs.length;""!==this._underlayId&&0===r&&(r=1),""!==this._overlayId&&r===this._lyrs.length&&(r=this._lyrs.length>0?this._lyrs.length-1:0)}i="switch"===a?new L(this._map,o,this,{visible:s}):new k(this._map,o,this,{visible:s}),x(i,this._lyrs,r)}},{key:"_removeGroup",value:function(t){var r=this,i=this._lyrs[w(this._lyrs,"_id",t)];if(!i instanceof e)throw new Error("".concat(t," does not exist on this manager."));t===this._overlayId?this._overlayId="":t===this._underlayId&&(this._underlayId="");!function t(i){for(;i._lyrs.length>0;){var n=i._lyrs.pop();n instanceof e?t(n):r._map.getLayer(n.id)&&r._map.removeLayer(n.id)}}(i),j(i,this._lyrs)}},{key:"_addLayer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t=(0,n.default)(!0,{fixedTo:"",beforeId:void 0,onVisiblePath:!0},t)).beforeId,i=t.fixedTo,o=t.onVisiblePath,a=t.parentNextLayerId,s=e.id;if(void 0===s)throw new Error("id is required.");if(w(this._lyrs,"_id",s)>=0)throw new Error("".concat(s," already exists on this manager."));void 0!==e.layout&&void 0!==e.layout.visibility||(e=(0,n.default)(!0,{layout:{visibility:"visible"}},e));var l="visible"===e.layout.visibility;o||(e.layout.visibility="none");var u,f,c=e.type,d=new O(s,this,{type:c,visible:l});if("overlay"===i)u=this._lyrs.length,this._overlayId=s;else if("underlay"===i)u=0,this._underlayId=s;else{if(r){var y=E(s),h=E(r);if(y!==h)throw new Error("beforeId is not same group.");var _=w(this._lyrs,"_id",r);if(_<0)throw new Error("not found beforeId's layer.");if(""!==this._underlayId&&0===_)throw new Error("can't overwrite fixed layer.");u=_}else u=this._lyrs.length;0===u&&""!==this._underlayId&&(u=1),u===this._lyrs.length&&""!==this._overlayId&&(u=this._lyrs.length>0?this._lyrs.length-1:0)}x(d,this._lyrs,u),(u===this._lyrs.length-1||void 0===(f=I(this._lyrs,d._id)))&&(f=a),this._map.addLayer(e,f)}},{key:"_removeLayer",value:function(e){var t=this._lyrs[w(this._lyrs,"_id",e)];if(!t instanceof O)throw new Error("This id is not layer.");e===this._overlayId?this._overlayId="":e===this._underlayId&&(this._underlayId=""),j(t,this._lyrs),this._map.removeLayer(e)}}]),e}(),k=function(e){f(r,e);var t=d(r);function r(e,i,o){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return g(this,r),s=(0,n.default)(!0,{visible:!0},s),(a=t.call(this,e,i,o))._type="multi",a._visible=s.visible,a}return r}(P),L=function(e){f(r,e);var t=d(r);function r(e,i,o){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return g(this,r),s=(0,n.default)(!0,{visible:!0},s),(a=t.call(this,e,i,o))._type="switch",a._visible=s.visible,a._selectId="",a}return b(r,[{key:"_show",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t?(this._selectId=e,l(v(r.prototype),"_show",this).call(this,e,t,n),this._lyrs.forEach((function(t){t.id!==e&&i._hide(t.id,!0)}))):this._selectId===e&&l(v(r.prototype),"_show",this).call(this,e,t,n)}},{key:"_addGroup",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(v(r.prototype),"_addGroup",this).call(this,e,i),!1!==e.visible&&(this._selectId=e.id,this._lyrs.forEach((function(r){r._id!==e.id&&t._hide(r._id,!0)})))}},{key:"_removeGroup",value:function(e){l(v(r.prototype),"_removeGroup",this).call(this,e),this._selectId===e&&(this._selectId="")}},{key:"_addLayer",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(v(r.prototype),"_addLayer",this).call(this,e,i),void 0!==e.layout&&"visible"!==e.layout.visibility||(this._selectId=e.id,this._lyrs.forEach((function(r){r._id!==e.id&&t._hide(r._id,!0)})))}},{key:"_removeLayer",value:function(e){l(v(r.prototype),"_removeLayer",this).call(this,e),this._selectId===e&&(this._selectId="")}}]),r}(P),S=function(e){f(r,e);var t=d(r);function r(e){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g(this,r),(i=t.call(this,e,"manager",void 0,n)).options=n,i.version=o.version,y(i,h(i))}return b(r,[{key:"_getById",value:function(e){if(""===e)return this;return function e(t,r,i){var n=r.split("/").slice(0,i+1).join("/"),o=w(t._lyrs,"_id",n);if(o>=0){var a=t._lyrs[o];return n!==r&&a instanceof P?e(a,r,++i):a}}(this,e,0)}},{key:"_getParentNextLayerId",value:function(e){if(e!==this){var t=e._id,r=e._parent,i=I(e._lyrs,t);return void 0===i&&(i=I(r._lyrs,t)),i}}},{key:"_onVisiblePath",value:function(e){return e===this||!0===e._visible&&this._onVisiblePath(e._parent)}},{key:"addGroup",value:function(e,t){var r=e.id;if(void 0===r)throw new Error("id is required.");if(this._getById(r))throw new Error('Layer/Group with id "'.concat(r,'" already exists on this manager.'));var i=E(r),n=this._getById(i);if(void 0===n)throw new Error("not found parent layer group.");n._addGroup(e,t)}},{key:"removeGroup",value:function(e){var t=this._getById(e);if(!(t instanceof P))throw new Error("This id is not group.");t._parent._removeGroup(t._id)}},{key:"addLayer",value:function(e,t){var r=e.id;if(void 0===r)throw new Error("id is required.");if(this._getById(r))throw new Error('Layer/Group with id "'.concat(r,'" already exists on this manager.'));var i=E(r),o=this._getById(i);if(void 0===o)throw new Error("not found parent layer group.");o._addLayer(e,(0,n.default)(!0,t,{onVisiblePath:this._onVisiblePath(o),parentNextLayerId:this._getParentNextLayerId(o)}))}},{key:"removeLayer",value:function(e){var t=this._getById(e);if(!(t instanceof O))throw new Error("This id is not layer.");t._parent._removeLayer(t._id)}},{key:"show",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=(0,n.default)(!0,{force:!1},t);var r=E(e),i=this._getById(r);i&&i._show(e,!0,(0,n.default)(!0,t,{onVisiblePath:this._onVisiblePath(i)}))}},{key:"hide",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=(0,n.default)(!0,{force:!1},t);var r=E(e),i=this._getById(r);i&&i._hide(e,!0,t)}},{key:"move",value:function(e,t){var r=this,i=E(e),n=this._getById(i);if(e!==t){if(t)if(i!==t.slice(0,t.lastIndexOf("/")+1))throw new Error("These ids are not same group.");if([n._underlayId,n._overlayId].indexOf(e)>=0)throw new Error("can't update fixed layer.");if(n._underlayId===t)throw new Error("can't update fixed layer.");if(""!==n._overlayId&&void 0===t)throw new Error("can't update fixed layer.");var o,a=n._lyrs[w(n._lyrs,"_id",e)];if(j(a,n._lyrs),t){var s=w(n._lyrs,"_id",t);if(s<0)throw new Error("not found beforeId's layer.");o=s}else o=n._lyrs.length;x(a,n._lyrs,o);!function e(t,i){t instanceof P?t._lyrs.forEach((function(t){e(t,i)})):r._map.moveLayer(t._id,i)}(a,this._getParentNextLayerId(n))}}},{key:"addSource",value:function(e,t){this._map.addSource(e,t)}},{key:"invoke",value:function(e){var t;if("function"==typeof this._map[e])return(t=this._map)[e].apply(t,a([].slice.call(arguments).slice(1)))}},{key:"setOpacity",value:function(e,t){var r=this;!function e(t,i){var n,o;t instanceof O&&(n=t._type,o=[],["fill","line","raster","circle","fill-extrusion","heatmap"].indexOf(n)>=0&&o.push(n+"-opacity"),"symbol"===n&&(o.push("icon-opacity"),o.push("text-opacity")),o).forEach((function(e){r._map.setPaintProperty(t._id,e,i)}));t instanceof P&&(t._opacity=i,t._lyrs.forEach((function(t){e(t,i)})))}(this._getById(e),t)}},{key:"getLayerIds",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(t=(0,n.default)(!0,{id:"",visiblity:"any"},t)).id,i=t.visiblity,o=this._getById(r);if(o instanceof O)return[o._id];var a=function t(r){var n=[];return r.forEach((function(r){r instanceof O&&("any"===i&&n.push(r._id),"visible"===i&&"visible"===e._map.getLayoutProperty(r._id,"visibility")&&n.push(r._id),"none"===i&&"none"===e._map.getLayoutProperty(r._id,"visibility")&&n.push(r._id)),r instanceof P&&(n=n.concat(t(r._lyrs)))})),n};return a(o._lyrs)}}]),r}(P);t.default=S,e.exports=t.default},function(e,t,r){e.exports=r(2).extend},function(e,t){
/*!
 * (extracted from)
 * jQuery JavaScript Library v2.0.3
 * http://jquery.com/
 *
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03T13:30Z
 */
var r={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object","[object Error]":"error"},i=r.toString,n=r.hasOwnProperty,o=e.exports={};o.isFunction=function(e){return"function"===o.type(e)},o.isArray=Array.isArray,o.isWindow=function(e){return null!=e&&e===e.window},o.type=function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?r[i.call(e)]||"object":typeof e},o.isPlainObject=function(e){if("object"!==o.type(e)||e.nodeType||o.isWindow(e))return!1;try{if(e.constructor&&!n.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},o.extend=function(){var e,t,r,i,n,a,s=arguments[0]||{},l=1,u=arguments.length,f=!1;for("boolean"==typeof s&&(f=s,s=arguments[1]||{},l=2),"object"==typeof s||o.isFunction(s)||(s={}),u===l&&(s=this,--l);l<u;l++)if(null!=(e=arguments[l]))for(t in e)r=s[t],s!==(i=e[t])&&(f&&i&&(o.isPlainObject(i)||(n=o.isArray(i)))?(n?(n=!1,a=r&&o.isArray(r)?r:[]):a=r&&o.isPlainObject(r)?r:{},s[t]=o.extend(f,a,i)):void 0!==i&&(s[t]=i));return s}},function(e){e.exports=JSON.parse('{"name":"mapbox-layer-manager","version":"0.0.1","description":"","main":"src/main.js","scripts":{"build":"webpack --mode production","dev":"webpack --mode development","start":"live-server ./ --open=\'./sample/\'"},"devDependencies":{"@babel/core":"^7.7.7","@babel/preset-env":"^7.7.7","babel-loader":"^8.0.6","babel-plugin-add-module-exports":"^1.0.2","jquery-extend":"^2.0.3","live-server":"^1.2.1","regenerator-runtime":"^0.13.3","terser-webpack-plugin":"^2.3.1","webpack":"^4.41.5","webpack-cli":"^3.3.11","webpack-stream":"^5.2.1"},"author":"yonda-yonda","license":"MIT"}')}]);